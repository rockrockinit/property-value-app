<<<<<<< HEAD
function isEmpty(e){return"undefined"==typeof e?!0:null===e?!0:"string"==typeof e&&""===e.trim()?!0:"number"!=typeof e||!isNaN(e)&&0!==e?!!($.isArray(e)&&e.length<=0):!0}function urldecode(e){for(e=""+e;;){var t=e.indexOf("+");if(0>t)break;e=e.substring(0,t)+"%20"+e.substring(t+1,e.length)}return unescape(e)}function isArray(e){return e&&"object"==typeof e?-1!=e.constructor.toString().indexOf("Array"):!1}function ucwords(e){var t,n,r,a;if(t=e.toLowerCase(),stringLen=t.length,stringLen>0)for(i=0;i<stringLen;i++)0===i?(n=t.substring(0,1).toUpperCase(),a=t.substring(1,stringLen),t=n+a):(n=t.substring(i,i+1)," "==n&&i<stringLen-1&&(n=t.substring(i+1,i+2).toUpperCase(),r=t.substring(0,i+1),a=t.substring(i+2,stringLen),t=r+n+a));return t}function formatAsMoney(e,t){return e-=0,e=Math.round(100*e)/100,e=e==Math.floor(e)?e+".00":10*e==Math.floor(10*e)?e+"0":e,e="undefined"!=typeof t?cms.addCommas(e):e}function isValidEmail(e){if("string"!=typeof e)return!1;var t=e.lastIndexOf("@");if(1>t||t+1===e.length)return!1;if(/(\.{2,})/.test(e))return!1;var n=e.substring(0,t),r=e.substring(t+1);return n.length<1||n.length>64||r.length<4||r.length>255?!1:/(^\.|\.$)/.test(n)||/(^\.|\.$)/.test(r)?!1:/^"(.+)"$/.test(n)||/^[\-a-zA-Z0-9!#$%*\/?|\^{}`~&'+=_\.]*$/.test(n)?!(!/^[\-a-zA-Z0-9\.]*$/.test(r)||-1===r.indexOf(".")):!1}function stopEvent(e){if(e=e?e:window.event,"undefined"!=typeof e){var t=$(e.target).closest("div[editor]");t.length&&t.data("disabled",!e.type.match(/leave$/)),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}}function loadWidget(){function e(){function e(e){a(e),$("<img />").attr("src","//www.narrpr.com/widgets/avm-widget/tracking-beacon.gif?Token="+encodeURIComponent(t.Token)+"&Entity="+encodeURIComponent(e.entityName)+"&t="+(new Date).getTime())}function r(e,t,n){a({status:100,statusText:"JSONP request failure"})}function a(e){var t=$("#"+n);0===e.status?t.html(e.html):t.hide()}$.ajax({type:"GET",url:"//www.narrpr.com/widgets/avm-widget/widget.ashx/html",processData:!0,data:{Token:t.Token,Query:t.Query,cbcode:t.CoBrandCode,ShowRprLinks:t.ShowRprLinks},contentType:"application/json; charset=utf-8",dataType:"jsonp",jsonpCallback:"onJSONPSuccess_"+n,cache:!0,success:e,error:r})}if(!isEmpty(address)){console.log("Loading Widget..."),rprAvmWidgetOptions.Query=address;var t=rprAvmWidgetOptions,n="rprAvmWidget_1";e()}}function step(e){if(!isEmpty(e))if($("html, body").animate({scrollTop:0},"normal",function(){}),$(".step").hide(),1===e)$(".step:eq(0)").show();else if(2===e){$(".step:eq(1)").show(),$(".btn-step2").prop("disabled",!1);var t=640,n=400,r="https://maps.googleapis.com/maps/api/streetview?size="+t+"x"+n+"&location="+address+"&fov=90&pitch=10&key="+key;$(".streetview").html('<img src="'+r+'" width="'+t+'" height="'+n+'" class="img-responsive" style="display:inline" />'),$(".address").html(address),$("#address").val(address)}else 3===e&&($(".chart").html(""),$(".chart-1").html($(".tmpl-loading").html()),$(".step:eq(2)").show(),loadWidget(),interval_count=0,interval=setInterval(function(){console.log("Checking Widget..."),""===$(".chart-2").html()&&($(".chart-1").html($("div#rprAvmWidget_1 .rprw-content-1").html()),$(".chart-2").html($("div#rprAvmWidget_1 .rprw-content-2").html())),""!==$(".chart-2").html()&&clearInterval(interval),interval_count>=15&&(alert("Error\n\nUnable to pull live report at this moment.\nPlease try at a later time."),clearInterval(interval)),interval_count++},1e3))}function initAutocomplete(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("autocomplete"),{types:["geocode"]}),autocomplete.addListener("place_changed",fillInAddress)}function fillInAddress(){var e=autocomplete.getPlace();for(var t in componentForm){var n=document.getElementById(t);isEmpty(n)||(document.getElementById(t).value="",document.getElementById(t).disabled=!1)}for(var r=0;r<e.address_components.length;r++){var a=e.address_components[r].types[0];if(componentForm[a]){var i=e.address_components[r][componentForm[a]],n=document.getElementById(a);isEmpty(n)||(n.value=i)}}}function geolocate(){}!function(e){var t=navigator.userAgent.toLowerCase();e.browser={version:(t.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(t),opera:/opera/.test(t),msie:/msie/.test(t)&&!/opera/.test(t),mozilla:/mozilla/.test(t)&&!/(compatible|webkit)/.test(t)},e.fn.selectRange=function(e,t){return t||(t=e),this.each(function(){if("undefined"!=typeof this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if("undefined"!=typeof this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}})},e.fn.outerHTML=function(t){return t?this.before(t).remove():e("<p>").append(this.eq(0).clone()).html()},e.fn.serializeObject=function(){var t={},n=this.serializeArray(),r=e("[data-hint]",this);return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||"";var e=r.filter('[name="'+this.name+'"]');1===e.length&&t[this.name]===e.attr("data-hint")&&(t[this.name]="")}),t},e.fn.serializeElement=function(){for(var t=e(this),n=e("<form></form>").append(t.clone()),r=["textarea","select",'input[type="text"]','input[type="hidden"]','input[type="checkbox"]','input[type="radio"]'],a=0;a<r.length;a++){var i=r[a],o=t.find(i);o.each(function(t){var r=e(this);r.get(0).tagName.match(/^(input)$/i)&&"undefined"!=typeof r.attr("type")&&r.attr("type").match(/^(checkbox|radio)$/i)?e(n).find(i).eq(t).attr("checked",r.attr("checked")):e(n).find(i).eq(t).val(r.val())})}return n.serializeObject()},e.fn.imagesLoaded=function(t,n){n="undefined"==typeof n?0:n;var r=e("img",this),a=r.length,i=1;e.cms.log("Images Total: "+r.length),r.length?r.each(function(o,s){var c=e(this);c.on("load",function(o){i&&(a--,n?(e.cms.log("Loaded"),a||("function"==typeof t&&t.call(r,o),e.cms.log("Images Loaded"),i=0)):("function"==typeof t&&t.call(r,o),a||(e.cms.log("Images Loaded"),i=0)))}),(this.complete||void 0===this.complete)&&(this.src=this.src)}):"function"==typeof t&&t.call(this)},e.hook=function(t,n){t="string"==typeof t?t.split(/,? +/):t,t=t instanceof Array?t:[];for(var r=0;r<t.length;r++){var a=t[r];if(!isEmpty(a)&&e.fn[a]){var i=e.fn[a];i&&(e.fn[a]=function(){var e=i.apply(this,arguments);return n(this,a,arguments),e},e.cms.log(a))}}},e.getJSONP=function(t){function n(e,t,n,a){e.error(r,a)}t.dataType="jsonp";var r=e.ajax(t),a=e(document.getElementsByTagName("head")[0].firstChild),i=a.attr("src")||"",o=(i.match(/callback=(\w+)/)||[])[1];if(o){var s=0,c=window[o];a[0].onerror=function(e){a.remove(),n(t,{},"error",e),clearTimeout(s)},t.timeout&&(window[o]=function(e){clearTimeout(s),c(e),c=null},s=setTimeout(function(){a.remove(),n(t,{},"timeout"),c&&(window[o]=function(){})},t.timeout))}},e.query=function(t){var n={};return t="undefined"==typeof t?document.location.search:t,t&&(t.indexOf("?")>=0&&(t=t.substring(t.indexOf("?")+1)),t.indexOf("#")>=0&&(t=t.substring(0,t.indexOf("#"))),t=t.replace(/\&amp;/,"&"),t=t.replace(/\&$/,""),e.each(t.split("&"),function(){var e=this.split("=");if(2===e.length){var t=e[0],r=e[1];/^[0-9.]+$/.test(r)&&(r=parseFloat(r)),"true"==r&&(r=!0),"false"==r&&(r=!1),("number"==typeof r||"boolean"==typeof r||r.length>0)&&(n[t]=r)}else 1===e.length&&(n[e[0]]="")})),n},e.extend({stringify:function(t){if("JSON"in window)return JSON.stringify(t);var n=typeof t;if("object"!=n||null===t)return"string"==n&&(t='"'+t+'"'),String(t);var r,a,i=[],o=t&&t.constructor==Array;for(r in t)a=t[r],n=typeof a,t.hasOwnProperty(r)&&("string"==n?a='"'+a+'"':"object"==n&&null!==a&&(a=e.stringify(a)),i.push((o?"":'"'+r+'":')+String(a)));return(o?"[":"{")+String(i)+(o?"]":"}")}})}(jQuery),RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,n)},Array.prototype.shuffle=function(){for(var e,t,n=this,r=n.length;r;e=Math.floor(Math.random()*r),t=n[--r],n[r]=n[e],n[e]=t);return n},Array.prototype.inArray=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.startsWith=function(e){return this.match("^"+e)==e},String.prototype.endsWith=function(e){return this.match(e+"$")==e},String.prototype.toCapitalCase=function(){var e=/\s/,t=this.split(e);for(e=/(\S)(\S+)/,i=t.length-1;i>=0;i--)e.exec(t[i]),t[i]=RegExp.$1.toUpperCase()+RegExp.$2.toLowerCase();return t.join(" ")},String.prototype.replaceAll=function(e,t){for(var n=this,r=n.indexOf(e);-1!=r;)n=n.replace(e,t),r=n.indexOf(e);return n},String.prototype.formatDate=function(e){var t=cms.parseDate(this);return t instanceof Date?t.format(e):this.trim()},Date.prototype.format=function(e,t){return cms.dateFormat(this,e,t)};var cms=cms||{};!function(e){e.isEven=function(e){return!(e%2)},e.even=e.isEven,e.isOdd=function(e){return e%2},e.odd=e.isOdd,e.formatMoney=function(t,n){return t-=0,t=Math.round(100*t)/100,t=t==Math.floor(t)?t+".00":10*t==Math.floor(10*t)?t+"0":t,t="undefined"!=typeof n?e.addCommas(t):t},e.money=e.formatMoney,e.dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,a=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(i,o,s){var c=e.dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(i)||/\d/.test(i)||(o=i,i=void 0),i=i?new Date(i):new Date,isNaN(i))throw SyntaxError("invalid date");o=String(c.masks[o]||o||c.masks["default"]),"UTC:"==o.slice(0,4)&&(o=o.slice(4),s=!0);var l=s?"getUTC":"get",p=i[l+"Date"](),d=i[l+"Day"](),u=i[l+"Month"](),m=i[l+"FullYear"](),f=i[l+"Hours"](),h=i[l+"Minutes"](),g=i[l+"Seconds"](),y=i[l+"Milliseconds"](),v=s?0:i.getTimezoneOffset(),b={d:p,dd:a(p),ddd:c.i18n.dayNames[d],dddd:c.i18n.dayNames[d+7],m:u+1,mm:a(u+1),mmm:c.i18n.monthNames[u],mmmm:c.i18n.monthNames[u+12],yy:String(m).slice(2),yyyy:m,h:f%12||12,hh:a(f%12||12),H:f,HH:a(f),M:h,MM:a(h),s:g,ss:a(g),l:a(y,3),L:a(y>99?Math.round(y/10):y),t:12>f?"a":"p",tt:12>f?"am":"pm",T:12>f?"A":"P",TT:12>f?"AM":"PM",Z:s?"UTC":(String(i).match(n)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+a(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!=10)*p%10]};return o.replace(t,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}(),e.dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},e.dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},e.parseDate=function(e){if(("string"==typeof e||e instanceof String)&&(e=e.trim(),!isEmpty(e))){var t=e.split(/\ +/);if(t.length<=2){for(var n=[{pattern:/^\d{4}-\d{1,2}-\d{1,2}$/,delimiter:/-/,props:["year","month","day"]},{pattern:/^\d{1,2}\/\d{1,2}\/\d{2,4}$/,delimiter:/\//,props:["month","day","year"]},{pattern:/^\d{1,2}\/\d{2,4}$/,delimiter:/\//,props:["month","year"]},{pattern:/^\d{2}:\d{2}(:\d{2})?$/,delimiter:/\:/,props:["hour","minutes","seconds"]}],r={},a=0;a<t.length;a++)for(var i=t[a],o=0;o<n.length;o++){var s=n[o];if(i.match(s.pattern))for(var c=i.split(s.delimiter),l=0;l<s.props.length;l++){var p=s.props[l];isEmpty(c[l])||(r[p]=c[l])}}var d=new Date,u=isEmpty(r.month)?"":parseInt(r.month.replace(/^0/,""))-1;if(isEmpty(r.year)||d.setFullYear(r.year),isEmpty(r.month)||""===u||(d.setDate("1"),d.setMonth(u)),!isEmpty(r.year)&&!isEmpty(r.month&&!isEmpty(r.day))){var m=new Date(r.year,u+1,0),f=m.getDate();f<=r.day?d.setDate(f):d.setDate(r.day)}return isEmpty(r.hour)||d.setHours(r.hour),isEmpty(r.minutes)||d.setMinutes(r.minutes),isEmpty(r.seconds)||d.setSeconds(r.seconds),d.setMilliseconds(0),d}}return""},e.getType=function(e){return"object"==typeof e?null===e?"null":e.constructor==(new Array).constructor?"array":e.constructor==(new Date).constructor?"date":e.constructor==(new RegExp).constructor?"regex":"object":typeof e},e.type=e.getType,e.addCommas=function(e){e="number"==typeof nStr?String(e):e,e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},e.commas=e.addCommas,e.include=function(e){var t=document.getElementsByTagName("head")[0];script=document.createElement("script"),script.src=e,script.type="text/javascript",t.appendChild(script)};var t=null,n=null,r=null,a=null;e.imagePopup=function(e,i,o,s){t=s,r=e,a=o,n=window.open(CMS_ROOT+"tinymce/imagebrowser.php","tinyImageWindow","width=680,height=570,resizable=0,scrollbars=0,status=0,toolbar=0,location=0,menubar=0"),n.focus()},e.setFile=function(e){t.document.forms[0].elements[r].value=e,"image"==a?(t.ImageDialog.getImageData&&t.ImageDialog.getImageData(),t.ImageDialog.showPreviewImage&&t.ImageDialog.showPreviewImage(e)):"media"==a&&(t.switchType(e),t.generatePreview()),tinyImageWindow.close()},e.addImage=function(e,t){"tinymce"==t?(e=e.replace(/\{SITE_ROOT\}/gi,SITE_ROOT),n.document.forms[0].elements[r].value=e,"undefined"!=typeof a&&("image"==a?n.showPreviewImage(e):"media"==a&&(n.switchType(e),n.generatePreview())),tinyFileBrowserWin.close()):"markitup"==t&&$.markItUp({name:"Picture",replaceWith:function(t){return e.match(/^\!/)&&e.match(/\!$/)?" "+e:" !"+e+"!"}})},e.addCode=function(e,t){$.markItUp({name:e,replaceWith:function(e){return t}})},e.filePopup=function(e){"string"==typeof e&&window.open(e,"File")},e.stopEvent=function(e){if(e=e?e:window.event,"undefined"!=typeof e){var t=$(e.target).closest("div[editor]");t.length&&t.data("disabled",!e.type.match(/leave$/)),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.version=function(e,t,n){function r(e){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}var a=n&&n.lexicographical,i=n&&n.zeroExtend,o=e.split("."),s=t.split(".");if("function"==typeof o.every){if(!o.every(r)||!s.every(r))return NaN}else{for(var c=!0,l=[o,s],p=0;p<l.length;p++)$.each(l[p],function(e,t){r(t)||(c=!1)});if(!c)return NaN}if(i){for(;o.length<s.length;)o.push("0");for(;s.length<o.length;)s.push("0")}if("function"==typeof o.map)a||(o=o.map(Number),s=s.map(Number));else{var l=[];$.each(o,function(e,t){l.push(Number(t))}),o=l,l=[],$.each(s,function(e,t){l.push(Number(t))}),s=l}for(var p=0;p<o.length;++p){if(s.length==p)return 1;if(o[p]!=s[p])return o[p]>s[p]?1:-1}return o.length!=s.length?-1:0},e.formatPhone=function(e){return isEmpty(e)||"string"!=typeof e&&"number"!=typeof e||(e=String(e),e.match(/^\d{10}$/)&&(e="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,4))),e},e.phone=e.formatPhone,e.pad=function(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},e.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},e.clone=function(e){return JSON&&(e=JSON.stringify(e),e=JSON.parse(e)),e},e.cropString=function(e,t,n){if("string"==typeof e&&"number"==typeof t&&t>0){var r=e.length;r>t&&(e=e.substring(0,t-1),"undefined"!=typeof n&&(e+="..."))}return e},e.crop=e.cropString,e.pagination=function(e,t,n,r,a){var i=$('<ul class="cms-pagination">');if(e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),r="number"==typeof r&&r>0?r:5,t>1){var o=e-1,s=e+1,c=Math.floor((e-1)/r);c=c>0?c*r:0;var l=c+1-r,p=c+1+r;o>0&&(l>0&&i.append('<li><a href="javascript:void(0)" data-page="'+l+'" data-skip="1" title="Rewind">&laquo;</a></li>'),i.append('<li><a href="javascript:void(0)" data-page="'+o+'" title="Previous">Prev</a></li>'));for(var d=c;c+r>d;d++){var u=d+1,m="";u==e&&(m=" class='current'"),t>=u&&i.append('<li><a href="javascript:void(0)" data-page="'+u+'" title="'+u+'"'+m+">"+u+"</a></li>")}t>=s&&(i.append('<li><a href="javascript:void(0)" data-page="'+s+'" title="Next">Next</a></li>'),t>p&&i.append('<li><a href="javascript:void(0)" data-page="'+p+'" data-skip="'+t+'" title="Forward">&raquo;</a></li>')),"undefined"!=typeof a&&i.append("<li>Total "+n+"</li>")}return i.outerHTML()},e.prepHtml=function(e){var t=document.createElement("div"),n=document.createDocumentFragment(),r=document.createDocumentFragment();for(t.innerHTML=$.browser.msie?'<span style="display:none">&nbsp;</span>'+e:e;t.firstChild;){var a=t.firstChild,i="string"==typeof a.tagName?a.tagName:"";i.match(/script|link/i)?r.appendChild(a):n.appendChild(a)}var o=[],s=[],c=[];if("undefined"!=typeof r.children?c=r.children:"undefined"!=typeof r.childNodes&&(c=r.childNodes),c.length)for(var l=0;l<c.length;l++){var p=c[l];"undefined"!=typeof p&&(p.tagName.match(/script/i)?"undefined"==typeof p.src||"string"==typeof p.src&&!p.src.match(/\/global\//i)?o.push(p):s.push(p):p.tagName.match(/link/i)&&("undefined"==typeof p.href||"string"==typeof p.href&&!p.href.match(/\/global\//i)?o.push(p):s.push(p)))}return{head:o,body:n}},e.filesize=function(t){if("number"===e.type(t)){var n=" bytes";return t>1024&&(t/=1024,n=" kb",t=Math.round(t)),t>1024&&(t/=1024,n=" mb"),t>1024&&(t/=1024,n=" gb"),t=Math.round(t),t+n}return""},e.upload=function(t,n,r,a){if(window.FormData&&"object"==typeof t&&"undefined"!=typeof n){t="array"!==e.type(t)?[t]:t;var i="Uploading "+t.length;i+=1===t.length?" file...":" files...",$.cms.openModal({message:i,aftercontent:function(){var e=new FormData;if("object"==typeof r)for(var i in r)e.append(i,r[i]);$.each(t,function(t,r){e.append(n,r)}),$.ajax({url:SITE_ROOT+"api/cms.files/upload/config/image/",type:"POST",data:e,processData:!1,contentType:!1,success:function(e){"function"==typeof a&&a.call(this,e),$.cms.closeModal()},error:function(e,t,n){var r={errors:[],successes:[]};r.errors.push(n),"function"==typeof a&&a.call(this,r)}})}})}},e.getParamNames=function(e){var t=e.toString();return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)},e.Apps=function(){this.active=function(e){var t=this,n=void 0;return"object"==typeof e?($.each(t,function(t,n){n===e?n.isActive=!0:n.isActive=!1}),n=e):$.each(t,function(e,t){return t.isActive?(n=t,!1):!0}),n}},e.Apps.prototype=Array.prototype,e.apps=new e.Apps}(cms),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),window.console&&window.console.log||(window.console={log:function(){}});var address="",key="AIzaSyCgBlKQ2oOXmsmhqybpXpmf1_5aPbHGIFw",interval=void 0,interval_count=0,rprAvmWidgetOptions={Token:"C9C86DE9-67C2-47F0-B925-5126AE875D7E",CoBrandCode:"btsrekrealty",ShowRprLinks:!1};$(function(){$(".btn-search").on("click",function(e){var t=$(this).closest("form"),n=[],r=t.serializeObject();isEmpty(r.address)&&n.push("Please select an address."),n.length?alert("Error\n\n"+n.join("\n")):(address=r.address,step(2))}),$(".btn-step2").on("click",function(e){var t=$(this).closest("form"),n=[],r=t.serializeObject();isEmpty(r.name)&&($('[name="name"]',t).addClass("error"),n.push("Please enter your name.")),isEmpty(r.email)?($('[name="email"]',t).addClass("error"),n.push("Please enter your email.")):isValidEmail(r.email)||($('[name="email"]',t).addClass("error"),n.push("Please enter a valid email address.")),isEmpty(r.phone)?($('[name="phone"]',t).addClass("error"),n.push("Please enter your phone.")):/\s*\(?\d{3}\)?\s*-?\s*\d{3}\s*-?\s*\d{4}\s*/.test(r.phone)||($('[name="phone"]',t).addClass("error"),n.push("Please enter a phone # formatted like 111-111-1111")),isEmpty(r.reason)&&($('[name="reason"]',t).addClass("error"),n.push("Please select a reason.")),n.length?alert("Error\n\n"+n.join("\n")):($(".btn-step2").prop("disabled",!0),r.action="email",r.address=address,console.log(r),isEmpty(location.host)||/edrodriguez\.com$/.test(location.host)?step(3):$.ajax({url:"/api.php",method:"post",dataType:"json",data:r,success:function(e){console.log(e),$(".btn-step2").prop("disabled",!1),"object"!=typeof e||isEmpty(e.success)?(console.log("Error: Email not sent!"),alert("Error\n\nUnable to submit at this time!")):(console.log("Success: Email sent!"),step(3))}}))}),$("input, select").on("focus",function(e){$(this).removeClass("error")}),step(1)}),/edrodriguez\.com$/i.test(location.host)&&(!function(e,t,n,r,a,i,o){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),o=t.getElementsByTagName(n)[0],i.async=1,i.src=r,o.parentNode.insertBefore(i,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-66592052-1","auto"),ga("send","pageview"));var placeSearch,autocomplete,componentForm={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"};
=======
function isEmpty(e){return"undefined"==typeof e?!0:null===e?!0:"string"==typeof e&&""===e.trim()?!0:"number"!=typeof e||!isNaN(e)&&0!==e?$.isArray(e)&&e.length<=0?!0:!1:!0}function urldecode(e){for(e=""+e;;){var t=e.indexOf("+");if(0>t)break;e=e.substring(0,t)+"%20"+e.substring(t+1,e.length)}return unescape(e)}function isArray(e){return e&&"object"==typeof e?-1==e.constructor.toString().indexOf("Array")?!1:!0:!1}function ucwords(e){var t,n,r,a;if(t=e.toLowerCase(),stringLen=t.length,stringLen>0)for(i=0;i<stringLen;i++)0===i?(n=t.substring(0,1).toUpperCase(),a=t.substring(1,stringLen),t=n+a):(n=t.substring(i,i+1)," "==n&&i<stringLen-1&&(n=t.substring(i+1,i+2).toUpperCase(),r=t.substring(0,i+1),a=t.substring(i+2,stringLen),t=r+n+a));return t}function formatAsMoney(e,t){return e-=0,e=Math.round(100*e)/100,e=e==Math.floor(e)?e+".00":10*e==Math.floor(10*e)?e+"0":e,e="undefined"!=typeof t?cms.addCommas(e):e}function isValidEmail(e){if("string"!=typeof e)return!1;var t=e.lastIndexOf("@");if(1>t||t+1===e.length)return!1;if(/(\.{2,})/.test(e))return!1;var n=e.substring(0,t),r=e.substring(t+1);return n.length<1||n.length>64||r.length<4||r.length>255?!1:/(^\.|\.$)/.test(n)||/(^\.|\.$)/.test(r)?!1:(/^"(.+)"$/.test(n)||/^[\-a-zA-Z0-9!#$%*\/?|\^{}`~&'+=_\.]*$/.test(n))&&/^[\-a-zA-Z0-9\.]*$/.test(r)&&-1!==r.indexOf(".")?!0:!1}function stopEvent(e){if(e=e?e:window.event,"undefined"!=typeof e){var t=$(e.target).closest("div[editor]");t.length&&t.data("disabled",e.type.match(/leave$/)?!1:!0),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}}function initAutocomplete(){autocomplete=new google.maps.places.Autocomplete(document.getElementById("autocomplete"),{types:["geocode"]}),autocomplete.addListener("place_changed",fillInAddress)}function fillInAddress(){var e=autocomplete.getPlace();for(var t in componentForm){var n=document.getElementById(t);isEmpty(n)||(document.getElementById(t).value="",document.getElementById(t).disabled=!1)}for(var r=0;r<e.address_components.length;r++){var a=e.address_components[r].types[0];if(componentForm[a]){var i=e.address_components[r][componentForm[a]],n=document.getElementById(a);isEmpty(n)||(n.value=i)}}}function geolocate(){}!function(e){var t=navigator.userAgent.toLowerCase();e.browser={version:(t.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(t),opera:/opera/.test(t),msie:/msie/.test(t)&&!/opera/.test(t),mozilla:/mozilla/.test(t)&&!/(compatible|webkit)/.test(t)},e.fn.selectRange=function(e,t){return t||(t=e),this.each(function(){if("undefined"!=typeof this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if("undefined"!=typeof this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}})},e.fn.outerHTML=function(t){return t?this.before(t).remove():e("<p>").append(this.eq(0).clone()).html()},e.fn.serializeObject=function(){var t={},n=this.serializeArray(),r=e("[data-hint]",this);return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||"";var e=r.filter('[name="'+this.name+'"]');1===e.length&&t[this.name]===e.attr("data-hint")&&(t[this.name]="")}),t},e.fn.serializeElement=function(){for(var t=e(this),n=e("<form></form>").append(t.clone()),r=["textarea","select",'input[type="text"]','input[type="hidden"]','input[type="checkbox"]','input[type="radio"]'],a=0;a<r.length;a++){var i=r[a],o=t.find(i);o.each(function(t){var r=e(this);r.get(0).tagName.match(/^(input)$/i)&&"undefined"!=typeof r.attr("type")&&r.attr("type").match(/^(checkbox|radio)$/i)?e(n).find(i).eq(t).attr("checked",r.attr("checked")):e(n).find(i).eq(t).val(r.val())})}return n.serializeObject()},e.fn.imagesLoaded=function(t,n){n="undefined"==typeof n?0:n;var r=e("img",this),a=r.length,i=1;e.cms.log("Images Total: "+r.length),r.length?r.each(function(o,s){var p=e(this);p.on("load",function(o){i&&(a--,n?(e.cms.log("Loaded"),a||("function"==typeof t&&t.call(r,o),e.cms.log("Images Loaded"),i=0)):("function"==typeof t&&t.call(r,o),a||(e.cms.log("Images Loaded"),i=0)))}),(this.complete||void 0===this.complete)&&(this.src=this.src)}):"function"==typeof t&&t.call(this)},e.hook=function(t,n){t="string"==typeof t?t.split(/,? +/):t,t=t instanceof Array?t:[];for(var r=0;r<t.length;r++){var a=t[r];if(!isEmpty(a)&&e.fn[a]){var i=e.fn[a];i&&(e.fn[a]=function(){var e=i.apply(this,arguments);return n(this,a,arguments),e},e.cms.log(a))}}},e.getJSONP=function(t){function n(e,t,n,a){e.error(r,a)}t.dataType="jsonp";var r=e.ajax(t),a=e(document.getElementsByTagName("head")[0].firstChild),i=a.attr("src")||"",o=(i.match(/callback=(\w+)/)||[])[1];if(o){var s=0,p=window[o];a[0].onerror=function(e){a.remove(),n(t,{},"error",e),clearTimeout(s)},t.timeout&&(window[o]=function(e){clearTimeout(s),p(e),p=null},s=setTimeout(function(){a.remove(),n(t,{},"timeout"),p&&(window[o]=function(){})},t.timeout))}},e.query=function(t){var n={};return t="undefined"==typeof t?document.location.search:t,t&&(t.indexOf("?")>=0&&(t=t.substring(t.indexOf("?")+1)),t.indexOf("#")>=0&&(t=t.substring(0,t.indexOf("#"))),t=t.replace(/\&amp;/,"&"),t=t.replace(/\&$/,""),e.each(t.split("&"),function(){var e=this.split("=");if(2===e.length){var t=e[0],r=e[1];/^[0-9.]+$/.test(r)&&(r=parseFloat(r)),"true"==r&&(r=!0),"false"==r&&(r=!1),("number"==typeof r||"boolean"==typeof r||r.length>0)&&(n[t]=r)}else 1===e.length&&(n[e[0]]="")})),n},e.extend({stringify:function(t){if("JSON"in window)return JSON.stringify(t);var n=typeof t;if("object"!=n||null===t)return"string"==n&&(t='"'+t+'"'),String(t);var r,a,i=[],o=t&&t.constructor==Array;for(r in t)a=t[r],n=typeof a,t.hasOwnProperty(r)&&("string"==n?a='"'+a+'"':"object"==n&&null!==a&&(a=e.stringify(a)),i.push((o?"":'"'+r+'":')+String(a)));return(o?"[":"{")+String(i)+(o?"]":"}")}})}(jQuery),RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,n)},Array.prototype.shuffle=function(){for(var e,t,n=this,r=n.length;r;e=Math.floor(Math.random()*r),t=n[--r],n[r]=n[e],n[e]=t);return n},Array.prototype.inArray=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return!0;return!1},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.startsWith=function(e){return this.match("^"+e)==e},String.prototype.endsWith=function(e){return this.match(e+"$")==e},String.prototype.toCapitalCase=function(){var e=/\s/,t=this.split(e);for(e=/(\S)(\S+)/,i=t.length-1;i>=0;i--)e.exec(t[i]),t[i]=RegExp.$1.toUpperCase()+RegExp.$2.toLowerCase();return t.join(" ")},String.prototype.replaceAll=function(e,t){for(var n=this,r=n.indexOf(e);-1!=r;)n=n.replace(e,t),r=n.indexOf(e);return n},String.prototype.formatDate=function(e){var t=cms.parseDate(this);return t instanceof Date?t.format(e):this.trim()},Date.prototype.format=function(e,t){return cms.dateFormat(this,e,t)};var cms=cms||{};!function(e){e.isEven=function(e){return!(e%2)},e.even=e.isEven,e.isOdd=function(e){return e%2},e.odd=e.isOdd,e.formatMoney=function(t,n){return t-=0,t=Math.round(100*t)/100,t=t==Math.floor(t)?t+".00":10*t==Math.floor(10*t)?t+"0":t,t="undefined"!=typeof n?e.addCommas(t):t},e.money=e.formatMoney,e.dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,a=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(i,o,s){var p=e.dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(i)||/\d/.test(i)||(o=i,i=void 0),i=i?new Date(i):new Date,isNaN(i))throw SyntaxError("invalid date");o=String(p.masks[o]||o||p.masks["default"]),"UTC:"==o.slice(0,4)&&(o=o.slice(4),s=!0);var c=s?"getUTC":"get",l=i[c+"Date"](),d=i[c+"Day"](),u=i[c+"Month"](),m=i[c+"FullYear"](),f=i[c+"Hours"](),h=i[c+"Minutes"](),g=i[c+"Seconds"](),y=i[c+"Milliseconds"](),v=s?0:i.getTimezoneOffset(),b={d:l,dd:a(l),ddd:p.i18n.dayNames[d],dddd:p.i18n.dayNames[d+7],m:u+1,mm:a(u+1),mmm:p.i18n.monthNames[u],mmmm:p.i18n.monthNames[u+12],yy:String(m).slice(2),yyyy:m,h:f%12||12,hh:a(f%12||12),H:f,HH:a(f),M:h,MM:a(h),s:g,ss:a(g),l:a(y,3),L:a(y>99?Math.round(y/10):y),t:12>f?"a":"p",tt:12>f?"am":"pm",T:12>f?"A":"P",TT:12>f?"AM":"PM",Z:s?"UTC":(String(i).match(n)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+a(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return o.replace(t,function(e){return e in b?b[e]:e.slice(1,e.length-1)})}}(),e.dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},e.dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},e.parseDate=function(e){if(("string"==typeof e||e instanceof String)&&(e=e.trim(),!isEmpty(e))){var t=e.split(/\ +/);if(t.length<=2){for(var n=[{pattern:/^\d{4}-\d{1,2}-\d{1,2}$/,delimiter:/-/,props:["year","month","day"]},{pattern:/^\d{1,2}\/\d{1,2}\/\d{2,4}$/,delimiter:/\//,props:["month","day","year"]},{pattern:/^\d{1,2}\/\d{2,4}$/,delimiter:/\//,props:["month","year"]},{pattern:/^\d{2}:\d{2}(:\d{2})?$/,delimiter:/\:/,props:["hour","minutes","seconds"]}],r={},a=0;a<t.length;a++)for(var i=t[a],o=0;o<n.length;o++){var s=n[o];if(i.match(s.pattern))for(var p=i.split(s.delimiter),c=0;c<s.props.length;c++){var l=s.props[c];isEmpty(p[c])||(r[l]=p[c])}}var d=new Date,u=isEmpty(r.month)?"":parseInt(r.month.replace(/^0/,""))-1;if(isEmpty(r.year)||d.setFullYear(r.year),isEmpty(r.month)||""===u||(d.setDate("1"),d.setMonth(u)),!isEmpty(r.year)&&!isEmpty(r.month&&!isEmpty(r.day))){var m=new Date(r.year,u+1,0),f=m.getDate();f<=r.day?d.setDate(f):d.setDate(r.day)}return isEmpty(r.hour)||d.setHours(r.hour),isEmpty(r.minutes)||d.setMinutes(r.minutes),isEmpty(r.seconds)||d.setSeconds(r.seconds),d.setMilliseconds(0),d}}return""},e.getType=function(e){return"object"==typeof e?null===e?"null":e.constructor==(new Array).constructor?"array":e.constructor==(new Date).constructor?"date":e.constructor==(new RegExp).constructor?"regex":"object":typeof e},e.type=e.getType,e.addCommas=function(e){e="number"==typeof nStr?String(e):e,e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},e.commas=e.addCommas,e.include=function(e){var t=document.getElementsByTagName("head")[0];script=document.createElement("script"),script.src=e,script.type="text/javascript",t.appendChild(script)};var t=null,n=null,r=null,a=null;e.imagePopup=function(e,i,o,s){t=s,r=e,a=o,n=window.open(CMS_ROOT+"tinymce/imagebrowser.php","tinyImageWindow","width=680,height=570,resizable=0,scrollbars=0,status=0,toolbar=0,location=0,menubar=0"),n.focus()},e.setFile=function(e){t.document.forms[0].elements[r].value=e,"image"==a?(t.ImageDialog.getImageData&&t.ImageDialog.getImageData(),t.ImageDialog.showPreviewImage&&t.ImageDialog.showPreviewImage(e)):"media"==a&&(t.switchType(e),t.generatePreview()),tinyImageWindow.close()},e.addImage=function(e,t){"tinymce"==t?(e=e.replace(/\{SITE_ROOT\}/gi,SITE_ROOT),n.document.forms[0].elements[r].value=e,"undefined"!=typeof a&&("image"==a?n.showPreviewImage(e):"media"==a&&(n.switchType(e),n.generatePreview())),tinyFileBrowserWin.close()):"markitup"==t&&$.markItUp({name:"Picture",replaceWith:function(t){return e.match(/^\!/)&&e.match(/\!$/)?" "+e:" !"+e+"!"}})},e.addCode=function(e,t){$.markItUp({name:e,replaceWith:function(e){return t}})},e.filePopup=function(e){"string"==typeof e&&window.open(e,"File")},e.stopEvent=function(e){if(e=e?e:window.event,"undefined"!=typeof e){var t=$(e.target).closest("div[editor]");t.length&&t.data("disabled",e.type.match(/leave$/)?!1:!0),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.version=function(e,t,n){function r(e){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}var a=n&&n.lexicographical,i=n&&n.zeroExtend,o=e.split("."),s=t.split(".");if("function"==typeof o.every){if(!o.every(r)||!s.every(r))return NaN}else{for(var p=!0,c=[o,s],l=0;l<c.length;l++)$.each(c[l],function(e,t){r(t)||(p=!1)});if(!p)return NaN}if(i){for(;o.length<s.length;)o.push("0");for(;s.length<o.length;)s.push("0")}if("function"==typeof o.map)a||(o=o.map(Number),s=s.map(Number));else{var c=[];$.each(o,function(e,t){c.push(Number(t))}),o=c,c=[],$.each(s,function(e,t){c.push(Number(t))}),s=c}for(var l=0;l<o.length;++l){if(s.length==l)return 1;if(o[l]!=s[l])return o[l]>s[l]?1:-1}return o.length!=s.length?-1:0},e.formatPhone=function(e){return isEmpty(e)||"string"!=typeof e&&"number"!=typeof e||(e=String(e),e.match(/^\d{10}$/)&&(e="("+e.substr(0,3)+") "+e.substr(3,3)+"-"+e.substr(6,4))),e},e.phone=e.formatPhone,e.pad=function(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},e.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},e.clone=function(e){return JSON&&(e=JSON.stringify(e),e=JSON.parse(e)),e},e.cropString=function(e,t,n){if("string"==typeof e&&"number"==typeof t&&t>0){var r=e.length;r>t&&(e=e.substring(0,t-1),"undefined"!=typeof n&&(e+="..."))}return e},e.crop=e.cropString,e.pagination=function(e,t,n,r,a){var i=$('<ul class="cms-pagination">');if(e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),r="number"==typeof r&&r>0?r:5,t>1){var o=e-1,s=e+1,p=Math.floor((e-1)/r);p=p>0?p*r:0;var c=p+1-r,l=p+1+r;o>0&&(c>0&&i.append('<li><a href="javascript:void(0)" data-page="'+c+'" data-skip="1" title="Rewind">&laquo;</a></li>'),i.append('<li><a href="javascript:void(0)" data-page="'+o+'" title="Previous">Prev</a></li>'));for(var d=p;p+r>d;d++){var u=d+1,m="";u==e&&(m=" class='current'"),t>=u&&i.append('<li><a href="javascript:void(0)" data-page="'+u+'" title="'+u+'"'+m+">"+u+"</a></li>")}t>=s&&(i.append('<li><a href="javascript:void(0)" data-page="'+s+'" title="Next">Next</a></li>'),t>l&&i.append('<li><a href="javascript:void(0)" data-page="'+l+'" data-skip="'+t+'" title="Forward">&raquo;</a></li>')),"undefined"!=typeof a&&i.append("<li>Total "+n+"</li>")}return i.outerHTML()},e.prepHtml=function(e){var t=document.createElement("div"),n=document.createDocumentFragment(),r=document.createDocumentFragment();for(t.innerHTML=$.browser.msie?'<span style="display:none">&nbsp;</span>'+e:e;t.firstChild;){var a=t.firstChild,i="string"==typeof a.tagName?a.tagName:"";i.match(/script|link/i)?r.appendChild(a):n.appendChild(a)}var o=[],s=[],p=[];if("undefined"!=typeof r.children?p=r.children:"undefined"!=typeof r.childNodes&&(p=r.childNodes),p.length)for(var c=0;c<p.length;c++){var l=p[c];"undefined"!=typeof l&&(l.tagName.match(/script/i)?"undefined"==typeof l.src||"string"==typeof l.src&&!l.src.match(/\/global\//i)?o.push(l):s.push(l):l.tagName.match(/link/i)&&("undefined"==typeof l.href||"string"==typeof l.href&&!l.href.match(/\/global\//i)?o.push(l):s.push(l)))}return{head:o,body:n}},e.filesize=function(t){if("number"===e.type(t)){var n=" bytes";return t>1024&&(t/=1024,n=" kb",t=Math.round(t)),t>1024&&(t/=1024,n=" mb"),t>1024&&(t/=1024,n=" gb"),t=Math.round(t),t+n}return""},e.upload=function(t,n,r,a){if(window.FormData&&"object"==typeof t&&"undefined"!=typeof n){t="array"!==e.type(t)?[t]:t;var i="Uploading "+t.length;i+=1===t.length?" file...":" files...",$.cms.openModal({message:i,aftercontent:function(){var e=new FormData;if("object"==typeof r)for(var i in r)e.append(i,r[i]);$.each(t,function(t,r){e.append(n,r)}),$.ajax({url:SITE_ROOT+"api/cms.files/upload/config/image/",type:"POST",data:e,processData:!1,contentType:!1,success:function(e){"function"==typeof a&&a.call(this,e),$.cms.closeModal()},error:function(e,t,n){var r={errors:[],successes:[]};r.errors.push(n),"function"==typeof a&&a.call(this,r)}})}})}},e.getParamNames=function(e){var t=e.toString();return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)},e.Apps=function(){this.active=function(e){var t=this,n=void 0;return"object"==typeof e?($.each(t,function(t,n){n===e?n.isActive=!0:n.isActive=!1}),n=e):$.each(t,function(e,t){return t.isActive?(n=t,!1):!0}),n}},e.Apps.prototype=Array.prototype,e.apps=new e.Apps}(cms),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),window.console&&window.console.log||(window.console={log:function(){}});var rprAvmWidgetOptions={Token:"C9C86DE9-67C2-47F0-B925-5126AE875D7E",CoBrandCode:"btsrekrealty",ShowRprLinks:!1},App={step:1,width:640,height:400,key:"AIzaSyCgBlKQ2oOXmsmhqybpXpmf1_5aPbHGIFw",interval:void 0,interval_count:0,interval_limit:15,id:"rprAvmWidget_1",options:{},init:function(){window.onpopstate=App.handleState,$(".btn-search").on("click",App.submitSearch),$("#autocomplete").on("keydown",App.onEnter),$(".btn-step2").on("click",App.submitContact),$("input, select").on("focus",function(e){$(this).removeClass("error")}),App.setStep(App.step)},loadWidget:function(){isEmpty(App.address)||(console.log("Loading Widget..."),rprAvmWidgetOptions.Query=App.address,App.options=rprAvmWidgetOptions,App.getWidgetHtml())},getWidgetHtml:function(){console.log("getWidgetHtml()"),$.ajax({type:"GET",url:location.protocol+"//www.narrpr.com/widgets/avm-widget/widget.ashx/html",processData:!0,data:{Token:App.options.Token,Query:App.options.Query,cbcode:App.options.CoBrandCode,ShowRprLinks:App.options.ShowRprLinks},contentType:"application/json; charset=utf-8",dataType:"jsonp",jsonpCallback:"onJSONPSuccess_"+App.id,cache:!0,success:App.onWidgetSuccess,error:App.onWidgetError})},onWidgetSuccess:function(e){App.processWidgetResult(e),$("<img />").attr("src","//www.narrpr.com/widgets/avm-widget/tracking-beacon.gif?Token="+encodeURIComponent(App.options.Token)+"&Entity="+encodeURIComponent(e.entityName)+"&t="+(new Date).getTime())},onWidgetError:function(e,t,n){App.processWidgetResult({status:100,statusText:"JSONP request failure"})},processWidgetResult:function(e){var t=$("#"+App.id);0===e.status?t.html(e.html):t.hide()},checkWidget:function(){App.interval_count++,console.log("Checking Widget..."),""===$(".chart-2").html()&&($(".chart-1").html($("div#rprAvmWidget_1 .rprw-content-1").html()),$(".chart-2").html($("div#rprAvmWidget_1 .rprw-content-2").html())),""!==$(".chart-2").html()&&clearInterval(App.interval),App.interval_count>=App.interval_limit&&(alert("Error\n\nUnable to pull live report at this moment.\nPlease try at a later time."),clearInterval(App.interval))},setStep:function(e,t){if(t="undefined"==typeof t?!1:t,!isEmpty(e))if(App.step=e,$("html, body").animate({scrollTop:0},"normal",function(){}),$(".step").hide(),1===e)t||App.saveHistory("#address-search"),$(".step:eq(0)").show();else if(2===e){t||App.saveHistory("#contact-info"),$(".step:eq(1)").show(),$(".btn-step2").prop("disabled",!1);var n="https://maps.googleapis.com/maps/api/streetview?size="+App.width+"x"+App.height+"&location="+App.address+"&fov=90&pitch=10&key="+App.key;$(".streetview").html('<img src="'+n+'" width="'+App.width+'" height="'+App.height+'" class="img-responsive" style="display:inline" />'),$(".address").html(App.address),$("#address").val(App.address)}else 3===e&&(t||App.saveHistory("#property-value"),$(".chart").html(""),$(".chart-1").html($(".tmpl-loading").html()),$(".step:eq(2)").show(),App.loadWidget(),App.interval_count=0,App.interval=setInterval(App.checkWidget,1e3))},saveHistory:function(e){history.pushState?history.pushState(null,null,e):location.hash=e},submitSearch:function(e){var t=$(this).closest("form"),n=[],r=t.serializeObject();isEmpty(r.address)&&n.push("Please select an address."),n.length?alert("Error\n\n"+n.join("\n")):(App.address=r.address,App.setStep(2))},onEnter:function(e){return 13===e.which?(e.preventDefault(),$(".btn-search").trigger("click"),!1):void 0},submitContact:function(e){var t=$(this).closest("form"),n=[],r=t.serializeObject();isEmpty(r.name)&&($('[name="name"]',t).addClass("error"),n.push("Please enter your name.")),isEmpty(r.email)?($('[name="email"]',t).addClass("error"),n.push("Please enter your email.")):isValidEmail(r.email)||($('[name="email"]',t).addClass("error"),n.push("Please enter a valid email address.")),isEmpty(r.phone)?($('[name="phone"]',t).addClass("error"),n.push("Please enter your phone.")):/\s*\(?\d{3}\)?\s*-?\s*\d{3}\s*-?\s*\d{4}\s*/.test(r.phone)||($('[name="phone"]',t).addClass("error"),n.push("Please enter a phone # formatted like 111-111-1111")),isEmpty(r.reason)&&($('[name="reason"]',t).addClass("error"),n.push("Please select a reason.")),n.length?alert("Error\n\n"+n.join("\n")):($(".btn-step2").prop("disabled",!0),r.action="email",r.address=App.address,console.log(r),isEmpty(location.host)||/(edrodriguez\.com|\.local)$/.test(location.host)?App.setStep(3):$.ajax({url:"/api.php",method:"post",dataType:"json",data:r,success:function(e){console.log(e),$(".btn-step2").prop("disabled",!1),"object"!=typeof e||isEmpty(e.success)?(console.log("Error: Email not sent!"),alert("Error\n\nUnable to submit at this time!")):(console.log("Success: Email sent!"),App.setStep(3))}}))},handleState:function(e){clearInterval(App.interval);var t=location.hash;/search/i.test(t)?App.setStep(1,1):/contact/i.test(t)?App.setStep(2,1):/value/i.test(t)&&App.setStep(3,1)}};$(function(){App.init()}),/edrodriguez\.com$/i.test(location.host)&&(!function(e,t,n,r,a,i,o){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),o=t.getElementsByTagName(n)[0],i.async=1,i.src=r,o.parentNode.insertBefore(i,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-66592052-1","auto"),ga("send","pageview"));var placeSearch,autocomplete,componentForm={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"};
>>>>>>> spa-hashes
